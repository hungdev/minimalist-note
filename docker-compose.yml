version: "3"
services:
  web-note:
    build: .
    restart: always
    expose:
      - 80  # Expose port for Coolify reverse proxy
    volumes:
      - web-note-data:/var/www/html/_tmp  # Persistent storage for notes
    environment:
      FILE_LIMIT: 100000 # Maximum number of files
      SINGLE_FILE_SIZE_LIMIT: 102400 # Max file size in bytes (100KB)
      ADMIN_MASTER_PASSWORD: ${ADMIN_MASTER_PASSWORD:-changeme} # Admin password for unlocking any note

volumes:
  web-note-data:
    driver: local  # Persistent volume managed by Docker
